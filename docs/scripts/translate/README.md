# ç¿»è¯‘ç³»ç»Ÿ v2.0 ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ–°åŠŸèƒ½

- âœ… **æ™ºèƒ½åˆ†æ®µç¿»è¯‘** - æŒ‰è¯­ä¹‰è¾¹ç•Œï¼ˆæ ‡é¢˜ã€æ®µè½ï¼‰åˆ†å‰²ï¼Œé¿å…è¶…å‡º token é™åˆ¶
- âœ… **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** - ç†è§£æ–‡æ¡£ç»“æ„ã€å‰åæ–‡å…³ç³»å’Œæœ¯è¯­ä¸€è‡´æ€§
- âœ… **å¢é‡ç¿»è¯‘** - åªç¿»è¯‘å˜æ›´çš„å†…å®¹ï¼Œä½¿ç”¨æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
- âœ… **å¹¶è¡Œå¤„ç†** - å¤šæ–‡ä»¶å’Œå¤šæ®µè½å¹¶å‘ç¿»è¯‘ï¼Œæ˜¾è‘—æå‡é€Ÿåº¦
- âœ… **æœ¯è¯­ç®¡ç†** - è‡ªåŠ¨ç»´æŠ¤æœ¯è¯­è¡¨ï¼Œç¡®ä¿ç¿»è¯‘ç»Ÿä¸€

## ğŸ“¦ è¿ç§»æ­¥éª¤

### 1. å¤‡ä»½æ—§è„šæœ¬ï¼ˆå¯é€‰ï¼‰

```bash
mv scripts/translate.mts scripts/translate.old.mts
```

### 2. å¯ç”¨æ–°è„šæœ¬

```bash
mv scripts/translate.new.mts scripts/translate.mts
```

### 3. é¦–æ¬¡è¿è¡Œ

```bash
# é¢„è§ˆå°†è¦ç¿»è¯‘çš„æ–‡ä»¶
bun run translate:dry-run

# å¼€å§‹ç¿»è¯‘
bun run translate
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```bash
# ç¿»è¯‘æ‰€æœ‰æ–‡ä»¶ï¼ˆä¸­æ–‡ â†’ è‹±æ–‡ï¼‰
bun run translate

# æŒ‡å®šè¯­è¨€å¯¹
bun run translate --source zh --target en

# ç¿»è¯‘å•ä¸ªæ–‡ä»¶
bun run translate --file guide/index.mdx

# å¼ºåˆ¶é‡æ–°ç¿»è¯‘ï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰
bun run translate --force

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸å®é™…ç¿»è¯‘ï¼‰
bun run translate --dry-run
```

### é«˜çº§ç”¨æ³•

```bash
# è°ƒæ•´å¹¶å‘æ•°ï¼ˆé»˜è®¤ 3ï¼‰
bun run translate --concurrency 5

# æ¸…é™¤ç¿»è¯‘ç¼“å­˜
bun run translate --clear-cache

# ç»„åˆä½¿ç”¨
bun run translate --source zh --target ja --concurrency 2 --force
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
docs/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ translate.mts              # ä¸»å…¥å£
â”‚   â””â”€â”€ translate/
â”‚       â”œâ”€â”€ types.ts              # ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ config.ts             # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ cache.ts              # ç¼“å­˜ç³»ç»Ÿ
â”‚       â”œâ”€â”€ glossary.ts           # æœ¯è¯­è¡¨ç®¡ç†
â”‚       â”œâ”€â”€ parser.ts             # MDX è§£æå’Œåˆ†æ®µ
â”‚       â”œâ”€â”€ translator.ts         # AI ç¿»è¯‘å’Œå¹¶è¡Œæ§åˆ¶
â”‚       â”œâ”€â”€ engine.ts             # ç¿»è¯‘å¼•æ“ï¼ˆåè°ƒå™¨ï¼‰
â”‚       â””â”€â”€ utils.ts              # å·¥å…·å‡½æ•°
â”œâ”€â”€ content/
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ glossary.json         # æœ¯è¯­è¡¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤ï¼‰
â””â”€â”€ .translate-cache/
    â””â”€â”€ cache.json                # ç¿»è¯‘ç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```bash
# OpenAIï¼ˆæ¨èç”¨äºé˜¿é‡Œäº‘é€šä¹‰åƒé—®ï¼‰
export OPENAI_API_KEY="your-api-key"
export OPENAI_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"
export OPENAI_MODEL="qwen-plus"

# æˆ–ä½¿ç”¨ Anthropic Claude
export AI_PROVIDER="anthropic"
export ANTHROPIC_API_KEY="your-api-key"
```

### ä»£ç é…ç½®

åœ¨ `scripts/translate/config.ts` ä¸­è°ƒæ•´ï¼š

```typescript
export const defaultConfig: TranslateConfig = {
  chunking: {
    maxTokensPerChunk: 3000,      // æ¯ä¸ªåˆ†æ®µçš„æœ€å¤§ token æ•°
    overlapLines: 2,              // æ®µè½é‡å è¡Œæ•°ï¼ˆä¿æŒè¿è´¯æ€§ï¼‰
  },
  parallel: {
    maxConcurrency: 3,            // æœ€å¤§å¹¶å‘æ•°
    delayBetweenRequests: 300,    // è¯·æ±‚é—´å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
  },
  cache: {
    enabled: true,                // å¯ç”¨ç¼“å­˜
    dir: '.translate-cache',      // ç¼“å­˜ç›®å½•
  },
};
```

## ğŸ“š æœ¯è¯­è¡¨ç®¡ç†

### è‡ªåŠ¨ç»´æŠ¤

æœ¯è¯­è¡¨ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨ `content/docs/glossary.json`ï¼ŒåŒ…å«å¸¸è§æŠ€æœ¯æœ¯è¯­ã€‚

### æ‰‹åŠ¨ç¼–è¾‘

```json
{
  "version": "1.0.0",
  "lastUpdated": "2025-11-28T00:00:00.000Z",
  "terms": [
    {
      "source": "è®¤è¯",
      "translations": {
        "en": "authentication"
      },
      "category": "tech",
      "context": "ç”¨æˆ·èº«ä»½éªŒè¯"
    }
  ]
}
```

### æœ¯è¯­åˆ†ç±»

- `tech` - æŠ€æœ¯æœ¯è¯­
- `doc` - æ–‡æ¡£æœ¯è¯­
- `product` - äº§å“åç§°
- `other` - å…¶ä»–

## ğŸ¯ å·¥ä½œåŸç†

### æ™ºèƒ½åˆ†æ®µ

```
åŸå§‹æ–‡æ¡£
    â†“
è§£æ MDX ç»“æ„
    â”œâ”€ Frontmatter
    â”œâ”€ Imports
    â”œâ”€ æ ‡é¢˜ï¼ˆH2/H3ï¼‰
    â”œâ”€ ä»£ç å—
    â””â”€ æ®µè½
    â†“
æŒ‰è¯­ä¹‰è¾¹ç•Œåˆ†æ®µ
    â”œâ”€ ç¡®ä¿ä¸è¶…è¿‡ token é™åˆ¶
    â”œâ”€ ä¿æŒå†…å®¹å®Œæ•´æ€§
    â””â”€ æ ‡è®°å¯ç¿»è¯‘/ä¸å¯ç¿»è¯‘
    â†“
å¹¶è¡Œç¿»è¯‘å„æ®µ
    â”œâ”€ é™„åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯
    â”œâ”€ ä½¿ç”¨æœ¯è¯­è¡¨
    â””â”€ ä¿æŒæ ¼å¼ä¸€è‡´
    â†“
é‡æ–°ç»„è£…æ–‡æ¡£
```

### ç¼“å­˜æœºåˆ¶

```
æ£€æµ‹åˆ°ç¿»è¯‘è¯·æ±‚
    â†“
è®¡ç®—æºæ–‡ä»¶ hash
    â†“
å¯¹æ¯”ç¼“å­˜è®°å½•
    â”œâ”€ å®Œå…¨åŒ¹é… â†’ è·³è¿‡ç¿»è¯‘
    â”œâ”€ éƒ¨åˆ†å˜æ›´ â†’ åªç¿»è¯‘å˜æ›´æ®µè½
    â””â”€ æ— ç¼“å­˜ â†’ å®Œæ•´ç¿»è¯‘
    â†“
æ›´æ–°ç¼“å­˜è®°å½•
```

### ä¸Šä¸‹æ–‡æ„ŸçŸ¥

æ¯ä¸ªç¿»è¯‘æ®µè½éƒ½ä¼šè·å¾—ï¼š
- **æ–‡æ¡£ä¿¡æ¯**: æ ‡é¢˜ã€æè¿°ã€ç±»å‹
- **ç»“æ„ä¿¡æ¯**: å…¨æ–‡å¤§çº²ã€å½“å‰ä½ç½®
- **ç›¸é‚»ä¸Šä¸‹æ–‡**: å‰åæ®µè½æ‘˜è¦
- **æœ¯è¯­è¡¨**: ç»Ÿä¸€çš„æœ¯è¯­ç¿»è¯‘

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### å¹¶è¡Œç¿»è¯‘

- é»˜è®¤ 3 ä¸ªå¹¶å‘è¯·æ±‚
- å¯æ ¹æ® API é™åˆ¶è°ƒæ•´
- è‡ªåŠ¨è¯·æ±‚é—´å»¶è¿Ÿé˜²æ­¢é™æµ

### å¢é‡æ›´æ–°

- åªç¿»è¯‘ä¿®æ”¹çš„æ®µè½
- ä»ç¼“å­˜æ¢å¤æœªå˜æ›´éƒ¨åˆ†
- å¤§å¹…å‡å°‘ API è°ƒç”¨

### ç¤ºä¾‹æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | æå‡ |
|------|--------|--------|------|
| 10ä¸ªæ–‡æ¡£é¦–æ¬¡ç¿»è¯‘ | ~180s | ~60s | 3x |
| 10ä¸ªæ–‡æ¡£å¢é‡æ›´æ–°ï¼ˆ20%å˜æ›´ï¼‰ | ~180s | ~15s | 12x |
| å¤§æ–‡æ¡£ï¼ˆ>5000 tokenï¼‰ | å¤±è´¥ | æˆåŠŸ | âœ… |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API é™åˆ¶**: æ ¹æ®ä½ çš„ API é…é¢è°ƒæ•´ `maxConcurrency`
2. **ç¼“å­˜æ¸…ç†**: é‡å¤§æ ¼å¼å˜æ›´æ—¶è¿è¡Œ `--clear-cache`
3. **æœ¯è¯­å®¡æŸ¥**: å®šæœŸæ£€æŸ¥ `glossary.json` ç¡®ä¿æœ¯è¯­å‡†ç¡®
4. **å¤‡ä»½**: é¦–æ¬¡ä½¿ç”¨å»ºè®®å¤‡ä»½ç°æœ‰ç¿»è¯‘æ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

### ç¿»è¯‘å¤±è´¥

```bash
# æ¸…é™¤ç¼“å­˜åé‡è¯•
bun run translate --clear-cache --force
```

### æ ¼å¼é”™è¯¯

```bash
# å•æ–‡ä»¶æµ‹è¯•
bun run translate --file guide/index.mdx --force
```

### æ€§èƒ½é—®é¢˜

```bash
# é™ä½å¹¶å‘æ•°
bun run translate --concurrency 1
```

## ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡

è¿è¡Œç¿»è¯‘åä¼šæ˜¾ç¤ºè¯¦ç»†ç»Ÿè®¡ï¼š

```
ğŸ“Š Translation Summary
=====================================
Total files:      10
âœ… Translated:    7
â­ï¸  Skipped:       2 (2 from cache)
âŒ Failed:        1

Chunks:          45/47 successful

â±ï¸  Time:          45.23s
ğŸ“ˆ Avg time:      6.46s per file
```

## ğŸ”„ å›æ»šåˆ°æ—§ç‰ˆæœ¬

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```bash
mv scripts/translate.mts scripts/translate.v2.mts
mv scripts/translate.old.mts scripts/translate.mts
```

## ğŸ“ åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– PRã€‚

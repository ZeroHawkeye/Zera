# Zera 后端配置文件
# 环境变量优先级高于配置文件
# 环境变量格式: SERVER_HOST, SERVER_PORT 等

[server]
host = "0.0.0.0"
port = 9800

[database]
host = "localhost"
port = 5432
user = "zera"
password = "012359Clown@"
dbname = "zera"
sslmode = "disable"

[app]
# 开发模式: 启用自动迁移等开发特性
dev_mode = true

[admin]
# 初始管理员配置（首次启动时创建）
username = "admin"
email = "admin@zera.local"
password = "admin123"

[jwt]
# JWT 配置
secret = "your-super-secret-key-please-change-in-production"
# 访问令牌过期时间（秒）
access_token_expire = 3600
# 刷新令牌过期时间（秒）
refresh_token_expire = 604800

[storage]
# 对象存储配置（S3 兼容，使用 RustFS）
enabled = true
endpoint = "http://localhost:9000"
access_key = "zera"
secret_key = "zera"
bucket = "zera"
region = "us-east-1"
use_path_style = true

[static]
# 本地静态资源配置（独立于对象存储）
# 上传目录路径（相对于工作目录）
uploads_dir = "./uploads/static"
# 最大上传文件大小（字节），默认 2MB
max_upload_size = 2097152

[log]
# 日志配置
# 日志级别: debug, info, warn, error
level = "info"
# 日志格式: json (适合生产环境/日志平台), text (适合开发调试)
format = "text"
# 输出目标: stdout, stderr, 或文件路径
output = "stdout"
# 是否添加源代码位置（文件名和行号）
add_source = true
# 服务名称，用于日志标识（对接 SignOz/ES 时使用）
service_name = "zera"
# 服务版本
service_version = "1.0.0"
# 运行环境: development, staging, production
environment = "development"

[telemetry]
# OpenTelemetry 遥测配置
# 是否启用遥测功能
enabled = true
# OTLP 导出端点 (SigNoz 默认端口)
endpoint = "localhost:4317"
# 使用 gRPC 还是 HTTP 协议: grpc, http
protocol = "grpc"
# 是否使用不安全连接（开发环境可以设为 true）
insecure = true
# 采样率 (0.0 - 1.0)，1.0 表示采集所有请求
trace_sample_rate = 1.0
# 日志批量导出间隔（秒）
log_batch_interval = 5
# 日志批量导出大小
log_batch_size = 512

[telemetry.logs]
# 分类日志配置
# API 请求日志
api_enabled = true
# 应用程序日志
app_enabled = true
# 数据库查询日志
db_enabled = true
# 数据库慢查询阈值（毫秒），超过此阈值会记录警告日志
db_slow_query_threshold_ms = 100
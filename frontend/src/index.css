@import "tailwindcss";
@import "./theme/styles/themes.css";

/* Tailwind v4: 使用 class 选择器控制暗色模式 */
@custom-variant dark (&:where(.dark, .dark *));

html,
body,
#root {
  height: 100%;
  margin: 0;
}

/* ===========================================
   语义化颜色系统 (Semantic Color System)

   所有颜色都通过 CSS 变量定义，支持多主题扩展
   添加新主题只需在 themes.css 中定义对应的变量值
   =========================================== */

:root {
  /* --- 品牌色 (Brand Colors) --- */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.3);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  --color-primary: #3b82f6;
  --color-primary-light: rgba(59, 130, 246, 0.1);
  --glow-primary: 0 0 20px rgba(59, 130, 246, 0.15);

  /* --- 背景色 (Background Colors) --- */
  --color-bg-page: #f8fafc; /* 页面背景 slate-50 */
  --color-bg-container: #ffffff; /* 容器背景 white */
  --color-bg-elevated: #ffffff; /* 浮层背景 white */
  --color-bg-subtle: #f1f5f9; /* 次要背景 slate-100 */
  --color-bg-muted: #e2e8f0; /* 更淡背景 slate-200 */
  --color-bg-hover: rgba(0, 0, 0, 0.04); /* 悬停背景 */
  --color-bg-active: rgba(0, 0, 0, 0.06); /* 激活背景 */

  /* --- 文字色 (Text Colors) --- */
  --color-text-primary: #0f172a; /* 主要文字 slate-900 */
  --color-text-secondary: #475569; /* 次要文字 slate-600 */
  --color-text-tertiary: #64748b; /* 辅助文字 slate-500 */
  --color-text-muted: #94a3b8; /* 弱化文字 slate-400 */
  --color-text-placeholder: #cbd5e1; /* 占位符 slate-300 */

  /* --- 边框色 (Border Colors) --- */
  --color-border-primary: #e2e8f0; /* 主要边框 slate-200 */
  --color-border-secondary: #f1f5f9; /* 次要边框 slate-100 */
  --color-border-muted: rgba(0, 0, 0, 0.06); /* 弱化边框 */

  /* --- 交互色 (Interactive Colors) --- */
  --color-interactive-hover: rgba(255, 255, 255, 0.6); /* 按钮悬停 */
  --color-interactive-active: rgba(255, 255, 255, 0.8); /* 按钮激活 */
}

/* 暗色主题变量 */
.dark {
  /* --- 品牌色 (Brand Colors) --- */
  --glass-bg: rgba(15, 23, 42, 0.75);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  --color-primary: #60a5fa;
  --color-primary-light: rgba(96, 165, 250, 0.15);
  --glow-primary: 0 0 20px rgba(96, 165, 250, 0.2);

  /* --- 背景色 (Background Colors) --- */
  --color-bg-page: #0f172a; /* 页面背景 slate-900 */
  --color-bg-container: #1e293b; /* 容器背景 slate-800 */
  --color-bg-elevated: #334155; /* 浮层背景 slate-700 */
  --color-bg-subtle: #334155; /* 次要背景 slate-700 */
  --color-bg-muted: #475569; /* 更淡背景 slate-600 */
  --color-bg-hover: rgba(255, 255, 255, 0.06); /* 悬停背景 */
  --color-bg-active: rgba(255, 255, 255, 0.1); /* 激活背景 */

  /* --- 文字色 (Text Colors) --- */
  --color-text-primary: #f1f5f9; /* 主要文字 slate-100 */
  --color-text-secondary: #cbd5e1; /* 次要文字 slate-300 */
  --color-text-tertiary: #94a3b8; /* 辅助文字 slate-400 */
  --color-text-muted: #64748b; /* 弱化文字 slate-500 */
  --color-text-placeholder: #475569; /* 占位符 slate-600 */

  /* --- 边框色 (Border Colors) --- */
  --color-border-primary: #334155; /* 主要边框 slate-700 */
  --color-border-secondary: #1e293b; /* 次要边框 slate-800 */
  --color-border-muted: rgba(255, 255, 255, 0.1); /* 弱化边框 */

  /* --- 交互色 (Interactive Colors) --- */
  --color-interactive-hover: rgba(255, 255, 255, 0.1); /* 按钮悬停 */
  --color-interactive-active: rgba(255, 255, 255, 0.15); /* 按钮激活 */
}

/* 毛玻璃效果 */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
}

.glass-subtle {
  background: var(--color-bg-container);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0.95;
}

/* 柔和光晕效果 */
.glow {
  box-shadow: var(--glow-primary);
}

.glow-hover:hover {
  box-shadow: var(--glow-primary);
}

/* 平滑过渡 */
.transition-smooth {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===========================================
   语义化工具类 (Semantic Utility Classes)

   使用 CSS 变量，自动适配所有主题
   =========================================== */

/* --- 背景色工具类 --- */
.bg-page {
  background-color: var(--color-bg-page);
}
.bg-container {
  background-color: var(--color-bg-container);
}
.bg-elevated {
  background-color: var(--color-bg-elevated);
}
.bg-subtle {
  background-color: var(--color-bg-subtle);
}
.bg-muted {
  background-color: var(--color-bg-muted);
}
.bg-hover {
  background-color: var(--color-bg-hover);
}
.bg-active {
  background-color: var(--color-bg-active);
}
.hover\:bg-hover:hover {
  background-color: var(--color-bg-hover);
}
.hover\:bg-active:hover {
  background-color: var(--color-bg-active);
}

/* --- 文字色工具类 --- */
.text-default {
  color: var(--color-text-primary);
}
.text-secondary {
  color: var(--color-text-secondary);
}
.text-tertiary {
  color: var(--color-text-tertiary);
}
.text-muted {
  color: var(--color-text-muted);
}
.text-placeholder {
  color: var(--color-text-placeholder);
}
.hover\:text-default:hover {
  color: var(--color-text-primary);
}
.hover\:text-secondary:hover {
  color: var(--color-text-secondary);
}

/* --- 边框色工具类 --- */
.border-default {
  border-color: var(--color-border-primary);
}
.border-subtle {
  border-color: var(--color-border-secondary);
}
.border-muted {
  border-color: var(--color-border-muted);
}
.border-container {
  border-color: var(--color-bg-container);
}
.bg-border-muted {
  background-color: var(--color-border-muted);
}

/* --- 交互色工具类 --- */
.hover\:bg-interactive:hover {
  background-color: var(--color-interactive-hover);
}
.active\:bg-interactive:active {
  background-color: var(--color-interactive-active);
}

/* =========
   Semantic color utility classes (CSS variable backed)
   用于替代写死的 indigo/blue/purple 等 Tailwind 主色
   ========= */
.bg-primary {
  background-color: var(--color-primary);
}

.text-primary {
  color: var(--color-primary);
}

.border-primary {
  border-color: var(--color-primary);
}

.shadow-primary-glow {
  box-shadow: var(--glow-primary);
}

.bg-primary-soft {
  background-color: var(--color-primary-light);
}

.text-primary-strong {
  color: var(--color-primary);
}

.hover-bg-primary:hover {
  background-color: var(--color-primary);
}

.hover-text-primary:hover {
  color: var(--color-primary);
}

.hover-bg-primary-soft:hover {
  background-color: var(--color-primary-light);
}

/* =========
   Auth gradient utility (CSS variable backed)
   用于认证/品牌区域的渐变背景
   ========= */
.bg-auth-gradient {
  background: linear-gradient(
    135deg,
    var(--auth-gradient-from),
    var(--auth-gradient-via),
    var(--auth-gradient-to)
  );
}

/* 菜单项悬停效果 */
.menu-item-hover {
  position: relative;
  overflow: hidden;
}

.menu-item-hover::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--color-primary);
  transform: scaleY(0);
  transition: transform 0.2s ease;
}

.menu-item-hover:hover::before,
.menu-item-hover.active::before {
  transform: scaleY(1);
}

/* 激活状态背景 */
.menu-item-active {
  background: var(--color-primary-light);
}

/* ===========================================
   菜单组件样式 (Menu Component Styles)

   使用语义化变量，自动适配所有主题
   =========================================== */

/* 菜单项基础样式 */
.menu-item {
  color: var(--color-text-tertiary);
}

.menu-item:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-hover);
}

/* 菜单分割线 */
.menu-divider {
  border-color: var(--color-border-secondary);
}

/* 弹出菜单样式 */
.menu-popover-header {
  color: var(--color-text-primary);
  border-color: var(--color-border-secondary);
}

.menu-popover-item {
  color: var(--color-text-secondary);
}

.menu-popover-item:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-hover);
}

/* 外部链接样式 */
.menu-external-link {
  color: var(--color-text-tertiary);
}

.menu-external-link:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-hover);
}

/* 隐藏侧边栏横向滚动条 */
.sidebar-nav {
  overflow-x: hidden;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--color-border-muted) transparent;
}

.sidebar-nav::-webkit-scrollbar {
  width: 6px;
}

.sidebar-nav::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-nav::-webkit-scrollbar-thumb {
  background-color: var(--color-border-muted);
  border-radius: 3px;
}

.sidebar-nav::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-text-muted);
}

/* ===========================================
   Antd 组件暗色模式覆盖 (Antd Dark Mode Overrides)

   覆盖 Antd Popover 等组件的弹出层样式
   =========================================== */

/* Popover 弹出层背景色和文字颜色 */
.ant-popover .ant-popover-inner {
  background-color: var(--color-bg-elevated) !important;
  border: 1px solid var(--color-border-primary) !important;
  color: var(--color-text-primary) !important;
}

.ant-popover .ant-popover-inner-content {
  color: var(--color-text-primary) !important;
}

.ant-popover .ant-popover-arrow::before,
.ant-popover .ant-popover-arrow::after {
  background-color: var(--color-bg-elevated) !important;
}

/* 折叠菜单 Popover 特定样式 */
.collapsed-menu-popover .ant-popover-inner {
  background-color: var(--color-bg-elevated) !important;
  border: 1px solid var(--color-border-primary) !important;
  color: var(--color-text-primary) !important;
}

.collapsed-menu-popover .ant-popover-inner-content {
  color: var(--color-text-primary) !important;
}

/* 折叠菜单 Popover - 统一样式覆盖 */
.collapsed-menu-popover {
  /* 确保 Popover 内容的文字颜色正确 */
  --popover-text-color: var(--color-text-secondary);
  --popover-text-hover: var(--color-text-primary);
  --popover-bg: var(--color-bg-elevated);
}

.collapsed-menu-popover .ant-popover-inner {
  background-color: var(--popover-bg) !important;
  box-shadow:
    0 6px 16px 0 rgba(0, 0, 0, 0.08),
    0 3px 6px -4px rgba(0, 0, 0, 0.12),
    0 9px 28px 8px rgba(0, 0, 0, 0.05) !important;
}

/* 暗色模式下增强阴影 */
html.dark .collapsed-menu-popover .ant-popover-inner {
  box-shadow:
    0 6px 16px 0 rgba(0, 0, 0, 0.4),
    0 3px 6px -4px rgba(0, 0, 0, 0.3),
    0 9px 28px 8px rgba(0, 0, 0, 0.2) !important;
}

/* 折叠菜单 Popover 标题区域 */
.collapsed-menu-popover .ant-popover-inner-content > div:first-child {
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-secondary) !important;
}

/* Dropdown 下拉菜单背景色 */
.ant-dropdown .ant-dropdown-menu {
  background-color: var(--color-bg-elevated) !important;
  border: 1px solid var(--color-border-primary) !important;
}

.ant-dropdown .ant-dropdown-menu-item {
  color: var(--color-text-secondary) !important;
}

.ant-dropdown .ant-dropdown-menu-item:hover {
  background-color: var(--color-bg-hover) !important;
  color: var(--color-text-primary) !important;
}

/* Card 组件背景色 - 移除边框，使用阴影区分层级 */
.ant-card {
  background-color: var(--color-bg-container) !important;
  border: none !important;
  background: var(--color-bg-container) !important;
  overflow: hidden !important; /* 裁剪子元素，确保圆角生效 */
}

.ant-card-body {
  background-color: var(--color-bg-container) !important;
  background: var(--color-bg-container) !important;
}

.ant-card-head {
  border-color: var(--color-border-muted) !important;
  background-color: var(--color-bg-container) !important;
  background: var(--color-bg-container) !important;
}

.ant-card-head-title {
  color: var(--color-text-primary) !important;
}

/* Statistic 组件文字颜色 */
.ant-statistic-title {
  color: var(--color-text-tertiary) !important;
}

/* Table 组件暗色模式 - 使用弱化边框 */
.ant-table {
  background-color: var(--color-bg-container) !important;
}

.ant-table-thead > tr > th {
  background-color: var(--color-bg-subtle) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-muted) !important;
}

.ant-table-tbody > tr > td {
  background-color: var(--color-bg-container) !important;
  border-color: var(--color-border-muted) !important;
}

.ant-table-tbody > tr:hover > td {
  background-color: var(--color-bg-hover) !important;
}

.ant-table-wrapper {
  border-radius: 12px !important;
  overflow: hidden !important;
}

/* Input 组件暗色模式 - 使用弱化边框 */
.ant-input,
.ant-input-affix-wrapper,
.ant-select-selector,
.ant-picker {
  background-color: var(--color-bg-container) !important;
  border-color: var(--color-border-muted) !important;
  color: var(--color-text-primary) !important;
}

.ant-input:hover,
.ant-input-affix-wrapper:hover,
.ant-select-selector:hover,
.ant-picker:hover {
  border-color: var(--color-primary) !important;
}

.ant-input:focus,
.ant-input-affix-wrapper:focus,
.ant-input-affix-wrapper-focused {
  border-color: var(--color-primary) !important;
  box-shadow: 0 0 0 2px var(--color-primary-light) !important;
}

.ant-input::placeholder,
.ant-select-selection-placeholder {
  color: var(--color-text-placeholder) !important;
}

/* Button 组件暗色模式 - 使用弱化边框 */
.ant-btn-default {
  background-color: var(--color-bg-container) !important;
  border-color: var(--color-border-muted) !important;
  color: var(--color-text-primary) !important;
}

.ant-btn-default:hover {
  background-color: var(--color-bg-hover) !important;
  border-color: var(--color-primary) !important;
  color: var(--color-primary) !important;
}

/* Pagination 组件暗色模式 - 使用弱化边框 */
.ant-pagination-item {
  background-color: var(--color-bg-container) !important;
  border-color: var(--color-border-muted) !important;
}

.ant-pagination-item a {
  color: var(--color-text-primary) !important;
}

.ant-pagination-item-active {
  border-color: var(--color-primary) !important;
}

.ant-pagination-item-active a {
  color: var(--color-primary) !important;
}

/* Select 下拉框组件 */
.ant-select-dropdown {
  background-color: var(--color-bg-elevated) !important;
  border: 1px solid var(--color-border-muted) !important;
}

.ant-select-item {
  color: var(--color-text-secondary) !important;
}

.ant-select-item-option-selected {
  background-color: var(--color-primary-light) !important;
  color: var(--color-primary) !important;
}

.ant-select-item-option-active {
  background-color: var(--color-bg-hover) !important;
}
